{"version":3,"file":"FRouter.umd.js","sources":["../template/router-view.js","../core/install.js","../utils/History.js","../core/index.js"],"sourcesContent":["export default {\r\n    props: {\r\n        name: {\r\n            type: String,\r\n            default: 'default'\r\n        }\r\n    },\r\n\r\n    render (_, { parent, data }) {\r\n\r\n        function renderCore (_, { parent, data }) {\r\n            // router-view will be rendered as matched component \r\n            let h = parent.$createElement\r\n            let hash = this.$router.currentHash  \r\n\r\n            // the x level routeMap and hash  match\r\n            if (!parent._childrenMap) {\r\n                let currentMap = this.$router.routeMap\r\n                let matched = []\r\n                currentMap.forEach(item => {\r\n                    let index = hash.indexOf(item.path)\r\n                    if (index === 0) {\r\n                        matched.push(item)\r\n                    }\r\n                })\r\n                \r\n                if (matched[0].redirect) {\r\n                    location.href.replace(matched[0].path, matched[0].redirect)\r\n                    return renderCore(_, { parent, data })\r\n                }\r\n\r\n                if (matched[0].children) {\r\n                    data._childrenMap = matched[0].children\r\n                    data._hashChip = matched[0].path\r\n                }\r\n\r\n                return h(matched[0].component)\r\n                \r\n                \r\n            } else {\r\n                let currentMap = parent._childrenMap\r\n                let parentHashChip = parent._hashChip\r\n                let matched = []\r\n\r\n                if (parentHashChip[-1] !== '/') {\r\n                    parentHashChip += '/'\r\n                }\r\n\r\n                currentMap.forEach(item => {\r\n                    let index = hash.indexOf(parentHashChip + item.path)\r\n                    if (index !== -1) {\r\n                        matched.push(item)\r\n                    }\r\n                })\r\n\r\n                if (matched[0].redirect) {\r\n                    location.href.replace(matched[0].path, matched[0].redirect)\r\n                    return renderCore(_, { parent, data })\r\n                }\r\n\r\n                if (matched[0].children) {\r\n                    data._childrenMap = matched[0].children\r\n                    data._hashChip = matched[0].path\r\n                }\r\n\r\n                return h(matched[0].component)\r\n            }    \r\n        }\r\n\r\n        renderCore(_, { parent, data })\r\n        \r\n    }    \r\n}\r\n\r\n\r\n","import RouterView from '../template/router-view.js'\r\n\r\nconst isDef = v => v !== undefined\r\n\r\nconst install = function (Vue) {\r\n\r\n    Vue.mixin({\r\n        beforeCreate () {\r\n            if (isDef(this.$options.router)) {\r\n                this._routerRoot = this\r\n                this._router = this.$options.router\r\n                this._router.initHistory()\r\n            } else {\r\n                this._routerRoot = this.$parent || this.$parent._routerRoot\r\n            }\r\n        }\r\n    })\r\n\r\n    Object.defineProperty(Vue.prototype, '$router', {\r\n        get () {\r\n            return this._routerRoot._router\r\n        }\r\n    })\r\n\r\n    Vue.component('RouterView', RouterView)\r\n    \r\n}\r\n\r\nexport default install","class History {\r\n    constructor (router) {\r\n        this.router = router\r\n    }\r\n\r\n    initHistory () {\r\n        this.Stack = []\r\n        this.Stack.push(this.router.currentHash)\r\n    }\r\n\r\n    push (url) {\r\n        location.href = url\r\n        this.Stack.push(this.router.currentHash)\r\n    }\r\n\r\n    back () {\r\n        let index = this.Stack.indexOf(this.router.currentHash)\r\n        if (index > 0) {\r\n            location.href = this.Stack[index-1]\r\n        } else {\r\n            location.reload()\r\n        }\r\n    }\r\n\r\n    forward () {\r\n        let index = this.Stack.indexOf(this.router.currentHash)\r\n        if (index < this.Stack.length) {\r\n            location.href = this.Stack[index+1]\r\n        } else {\r\n            location.reload()\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n\r\nexport default History","import install from './install'\r\nimport History from '../utils/History'\r\n\r\n\r\nclass FRouter {\r\n    constructor (options) {\r\n        this.routeMap = options.routes\r\n    }\r\n\r\n    get currentHash () {\r\n        let href = window.location.href\r\n        let index = href.indexOf('#')\r\n        \r\n        if (index < 0) {\r\n            return ''\r\n        }\r\n\r\n        return href.slice(index + 1)\r\n    }\r\n\r\n    initHistory () {\r\n        this.history.initHistory()\r\n    }\r\n\r\n    push (url) {\r\n        this.history.push(url)\r\n    } \r\n\r\n    back () {\r\n        this.history.back()\r\n    }\r\n\r\n    forward () {\r\n        this.history.forward()\r\n    }\r\n}\r\n\r\nFRouter.install = install\r\nFRouter.prototype.history = new History(FRouter.prototype)\r\n\r\nexport default FRouter"],"names":["props","name","type","String","render","_","parent","data","renderCore","h","$createElement","hash","$router","currentHash","_childrenMap","currentMap","routeMap","matched","forEach","item","index","indexOf","path","push","redirect","location","href","replace","children","_hashChip","component","parentHashChip","isDef","v","undefined","install","Vue","mixin","beforeCreate","$options","router","_routerRoot","_router","initHistory","$parent","Object","defineProperty","prototype","get","RouterView","History","Stack","url","reload","length","FRouter","options","routes","history","back","forward","window","slice"],"mappings":"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"}