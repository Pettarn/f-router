{"version":3,"file":"FRouter.umd.js","sources":["../template/router-view.js","../core/install.js","../utils/History.js","../core/index.js"],"sourcesContent":["export default {\r\n    props: {\r\n        name: {\r\n            type: String,\r\n            default: 'default'\r\n        }\r\n    },\r\n\r\n    render (_, { parent, data }) {\r\n\r\n        // router-view will be rendered as matched component \r\n        let h = parent.$createElement\r\n        let hash = this.$router.currentHash  \r\n\r\n        // the x level routeMap and hash  match\r\n        if (!parent._childrenMap) {\r\n            let currentMap = this.$router.routeMap\r\n            let matched = []\r\n            currentMap.forEach(item => {\r\n                let index = hash.indexOf(item.path)\r\n                if (index === 0) {\r\n                    matched.push(item)\r\n                }\r\n            })\r\n            \r\n            if (matched[0].children) {\r\n                data._childrenMap = matched[0].children\r\n                data._hashChip = matched[0].path\r\n            }\r\n\r\n            return h(matched[0].component)\r\n            \r\n            \r\n        } else {\r\n            let currentMap = parent._childrenMap\r\n            let parentHashChip = parent._parentHashChip\r\n            let matched = []\r\n\r\n            if (parentHashChip[-1] !== '/') {\r\n                parentHashChip += '/'\r\n            }\r\n\r\n            currentMap.forEach(item => {\r\n                let index = hash.indexOf(parentHashChip + item.path)\r\n                if (index !== -1) {\r\n                    matched.push(item)\r\n                }\r\n            })\r\n\r\n            if (matched[0].children) {\r\n                data._childrenMap = matched[0].children\r\n                data._hashChip = matched[0].path\r\n            }\r\n\r\n            return h(matched[0].component)\r\n        }\r\n    }    \r\n}\r\n\r\n\r\n","import RouterView from '../template/router-view.js'\r\n\r\n\r\nconst install = function (Vue) {\r\n\r\n    Vue.mixin({\r\n        beforeCreate() {\r\n            if (this.$options.router) {\r\n                Object.defineProperty(Vue.prototype, $router, {\r\n                    get () {\r\n                        return this.$options.router\r\n                    }\r\n                })\r\n                this.$router.initHistory()\r\n            }\r\n        },\r\n    })\r\n\r\n    Vue.component('RouterView', RouterView)\r\n    \r\n}\r\n\r\nexport default install","class History {\r\n    constructor (router) {\r\n        this.router = router\r\n    }\r\n\r\n    initHistory () {\r\n        this.Stack = []\r\n        this.Stack.push(this.router.currentHash)\r\n    }\r\n\r\n    push (url) {\r\n        location.href = url\r\n        this.Stack.push(this.router.currentHash)\r\n    }\r\n\r\n    back () {\r\n        let index = this.Stack.indexOf(this.router.currentHash)\r\n        if (index > 0) {\r\n            location.href = this.Stack[index-1]\r\n        } else {\r\n            location.reload()\r\n        }\r\n    }\r\n\r\n    forward () {\r\n        let index = this.Stack.indexOf(this.router.currentHash)\r\n        if (index < this.Stack.length) {\r\n            location.href = this.Stack[index+1]\r\n        } else {\r\n            location.reload()\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n\r\nexport default History","import install from './install'\r\nimport History from '../utils/History'\r\n\r\n\r\nclass FRouter {\r\n    constructor (options) {\r\n        this.routeMap = options.routes\r\n    }\r\n\r\n    get currentHash () {\r\n        let href = window.location.href\r\n        let index = href.indexOf('#')\r\n        \r\n        if (index < 0) {\r\n            return ''\r\n        }\r\n\r\n        return href.slice(index + 1)\r\n    }\r\n\r\n    initHistory () {\r\n        this.history.initHistory()\r\n    }\r\n\r\n    push (url) {\r\n        this.history.push(url)\r\n    } \r\n\r\n    back () {\r\n        this.history.back()\r\n    }\r\n\r\n    forward () {\r\n        this.history.forward()\r\n    }\r\n}\r\n\r\nFRouter.install = install\r\nFRotuer.prototype.history = new History(FRouter.prototype)\r\n\r\nexport default FRouter"],"names":["props","name","type","String","render","_","parent","data","h","$createElement","hash","$router","currentHash","_childrenMap","currentMap","routeMap","matched","forEach","item","index","indexOf","path","push","children","_hashChip","component","parentHashChip","_parentHashChip","install","Vue","mixin","beforeCreate","$options","router","Object","defineProperty","prototype","get","initHistory","RouterView","History","Stack","url","location","href","reload","length","FRouter","options","routes","history","back","forward","window","slice","FRotuer"],"mappings":"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"}